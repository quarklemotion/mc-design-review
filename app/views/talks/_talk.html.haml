.talk.clearfix
  .left
    = render partial: 'profile_box', locals: { profile: talk.presenter }
    = render partial: 'profile_box', locals: { profile: talk.co_presenter } if talk.co_presenter
  .right
    %h3.title
      = talk.title
    .details.right-text
      - if talk.date
        = date_format(talk.date)
      - else
        Talk date
        %em TBC
    .details
      = talk.description
    .details
      %dl
        %dt Who should attend?
        %dd 
          = talk.attend
      
        %dt What can we expect to get from this talk?
        %dd 
          = talk.expect

        %dt What should we do to prepare for this talk?
        %dd 
          = talk.prepare

    .details.attendees
      - if talk.attendees.count > 0
        = pluralize(talk.attendees.count, 'Person') 
        will be attending
        - if current_user.is_attending?(talk)
          = link_to "I won't be attending", attendance_path(1, talk_id: talk.id), data: {method: :delete}
        - elsif current_user != talk.presenter 
          = link_to "I plan on attending", attendances_path(talk_id: talk.id), data: {method: :post}
        = render partial: 'attendee', collection: talk.attendees

      - else 
        = link_to "Be the first to sign up", attendances_path(talk_id: talk.id), class: 'btn btn-info', data: {method: :post} unless talk.presenter == current_user


    - if current_user == talk.presenter
      .details.right-text
        = link_to 'Edit Talk', edit_talk_path(talk)
        |
        = link_to 'Destroy Talk', talk, :confirm => 'Are you sure?', :method => :delete




